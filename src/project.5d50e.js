window.__require=function t(e,o,n){function i(r,s){if(!o[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}}var u=o[r]={exports:{}};e[r][0].call(u.exports,function(t){return i(e[r][1][t]||t)},u,u.exports,t,e,o,n)}return o[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({AudioManager:[function(t,e,o){"use strict";cc._RF.push(e,"88c70Ktw0pBKKUTDtyQ2NkZ","AudioManager"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Utils/HashMap");window.oncanplay&&(window.oncanplay=function(){a.canPlay=!0});var i="sounds/",a=function(){function t(){this.audioID={},this.clips=new n.HashMap}return Object.defineProperty(t,"inst",{get:function(){return this.ins?this.ins:this.ins=new t},enumerable:!0,configurable:!0}),t.prototype.init=function(t){var e=this;console.warn(" start load AudioClip ");var o=this;cc.loader.loadRes(i+"bgm",cc.AudioClip,function(e,n){e?console.error(e):(o.clips.add(n.name,n),t&&t())}),cc.loader.loadRes(i+"mouse_bgm",function(t,e){t?console.error(t):o.clips.add(e.name,e)}),cc.loader.loadRes(i+"bgm_30",function(t,e){t?console.error(t):o.clips.add(e.name,e)}),cc.loader.loadResDir(i,function(t,o,n){if(t)console.error(t);else for(var i=0,a=o;i<a.length;i++){var r=a[i];e.clips.has(r.name)||e.clips.add(r.name,r)}})},t.prototype.playEffect=function(e,o,n){var a=this;if(void 0===o&&(o=!1),t.canPlay){if(!(cc.audioEngine.getEffectsVolume()<=.05)){var r=this.clips.get(e);r?(this.audioID[e]=cc.audioEngine.playEffect(r,o),cc.audioEngine.setFinishCallback(this.audioID[e],function(){n&&n()})):cc.loader.loadRes(i+e,cc.AudioClip,function(t,i){t?console.error(t):(a.clips.add(i.name,i),a.audioID[e]=cc.audioEngine.playEffect(i,o),cc.audioEngine.setFinishCallback(a.audioID[e],function(){n&&n()}))})}}else this.bindTouch()},t.prototype.playMusic=function(e,o){var n=this;if(void 0===o&&(o=!0),!t.canPlay)return this.bindTouch(),void t.PlayedList.push({loop:!0,volume:1,clipName:e,supTime:Date.now(),skip:!1,isBgm:!0});var a=this.clips.get(e);a?cc.audioEngine.playMusic(a,o):cc.loader.loadRes(i+e,cc.AudioClip,function(t,e){t?console.error(t):("string"==typeof e._audio&&cc.loader._cache&&cc.loader._cache[e._audio]&&cc.loader._cache[e._audio].buffer&&(e._audio=cc.loader._cache[e._audio].buffer),n.clips.add(e.name,e),cc.audioEngine.playMusic(e,o))})},t.prototype.bindTouch=function(){if(!t.hasBindTouch){var e=this,o=function(){var n;for(cc.game.canvas.removeEventListener("touchstart",o),t.canPlay=!0;(n=t.PlayedList.pop())&&e.clips.get(n.clipName)&&!n.skip;)cc.audioEngine.playMusic(e.clips.get(n.clipName),n.loop)};t.hasBindTouch=!0,cc.game.canvas.addEventListener("touchstart",o)}},t.PlayedList=[],t.canPlay=!1,t.hasBindTouch=!1,t}();o.gAudio=a.inst,cc._RF.pop()},{"../Utils/HashMap":"HashMap"}],BaseMediator:[function(t,e,o){"use strict";cc._RF.push(e,"a55f9L2TzpBioZHJUFK8aU4","BaseMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./BaseView"),i=cc._decorator,a=i.ccclass,r=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"View",{get:function(){return null==this.view&&(this.view=this.getComponent(n.default)),this.view},enumerable:!0,configurable:!0}),e.prototype.onRegister=function(){},e=__decorate([a],e)}(cc.Component));o.default=r,cc._RF.pop()},{"./BaseView":"BaseView"}],BaseView:[function(t,e,o){"use strict";cc._RF.push(e,"f61a0AuqqtLI4f73iaJBotC","BaseView"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,a=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){this.node.scale=0},e.prototype.Show=function(){this.node.runAction(cc.scaleTo(.1,1))},e.prototype.Hide=function(){this.node.runAction(cc.scaleTo(.1,0))},e.prototype.BindMedaitor=function(t){var e=this.node.addComponent(t);return e.onRegister&&e.onRegister(),e},e=__decorate([i],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],CelerSDK:[function(t,e,o){"use strict";cc._RF.push(e,"34a72Ol/DRKJb0NyonTxi8g","CelerSDK"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../ToSingleton"),i=t("../LogHandler"),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.alreadySubmit=!1,e.isNewPlayer=!0,e.celerStartCallback=null,e}return __extends(e,t),Object.defineProperty(e.prototype,"MatchID",{get:function(){return this.match.matchId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"MatchRandomSeed",{get:function(){return this.match.sharedRandomSeed},enumerable:!0,configurable:!0}),e.prototype.init=function(t){this.alreadySubmit=!1,CELER_X&&celerSDK.onStart(this.onCelerStart.bind(this)),CELER_X&&celerSDK.provideScore(function(){return 0}),this.celerStartCallback=t,CELER_X&&i.LogHandler.inst.initLog(celerSDK.log)},e.prototype.celerXReady=function(){console.log(" invoke celerx.ready() "),CELER_X?celerSDK.ready():this.onCelerStart()},e.prototype.isNew=function(){return this.isNewPlayer},e.prototype.isOnCelerPlatform=function(){return CELER_X},e.prototype.onCelerStart=function(){console.log(" celerx onStart call"),this.match=celerSDK.getMatch(),this.match||(this.match={matchId:"error : can not get id",shouldLaunchTutorial:!1,sharedRandomSeed:1}),console.log("match id:",this.match.matchId,", seed:",this.match.sharedRandomSeed),this.match&&this.match.shouldLaunchTutorial?this.isNewPlayer=!0:this.isNewPlayer=!1;var t=!1,e=document.getElementsByTagName("canvas")[0];cc.director.on(cc.Director.EVENT_AFTER_DRAW,function(){t&&(t=!1,CELER_X&&celerSDK.didTakeSnapshot(e.toDataURL("image/jpeg",.1)))}),CELER_X&&celerSDK.provideCurrentFrameData(function(){t=!0}),this.celerStartCallback&&(this.celerStartCallback(),this.celerStartCallback=null)},e.prototype.submitScore=function(t){this.alreadySubmit||(this.alreadySubmit=!0,console.log(" submit score:",t,", match id:",this.match.matchId),CELER_X&&celerSDK.submitScore(t))},e}(n.SingleTon());o.CelerSDK=a,cc._RF.pop()},{"../LogHandler":"LogHandler","../ToSingleton":"ToSingleton"}],FacadeGlobal:[function(t,e,o){"use strict";cc._RF.push(e,"c46cfDkM7pInYAeGAk610m1","FacadeGlobal"),cc._RF.pop()},{}],GameConfig:[function(t,e,o){"use strict";cc._RF.push(e,"a62daLXYOFLDYRzPtZG9Ak6","GameConfig"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e,"Url",{get:function(){return"https://vicat.wang/GameRes/"},enumerable:!0,configurable:!0}),e.prototype.loadConfig=function(t){var o=this;cc.loader.load(e.Url+e.Path+"?time="+Date.now(),function(e,n){e?console.error(e):(console.log(n),o.config=n,t())})},Object.defineProperty(e.prototype,"Config",{get:function(){return this.config},enumerable:!0,configurable:!0}),e.Path="Config/gameConfig.json",e}(t("../Utils/ToSingleton").SingleTon());o.GameConfig=n,cc._RF.pop()},{"../Utils/ToSingleton":"ToSingleton"}],GameFactory:[function(t,e,o){"use strict";cc._RF.push(e,"93d23kfnY1A76OtZSkIyJ5r","GameFactory"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Utils/HashMap"),i=function(){function t(t,e,o){this._pool=[],this.totalSize=0,this.initTime=[],this.completeHandler=o,this.template=t,this.totalSize=e,this.hashKey="ObjPool:"+this.template.name+" - "+this.totalSize,this.initPool(e)}return t.prototype.initPool=function(t,e){var o=this;if(void 0===e&&(e=!1),e)for(var n=0;n<t;++n){this.initTime.push(Date.now());var i=cc.instantiate(this.template);this.put(i)}else for(n=0;n<t;++n)this.initTime.push(Date.now()),setTimeout(function(){var t=cc.instantiate(o.template);o.put(t)},n)},t.prototype.size=function(){return this._pool.length},t.prototype.clear=function(){for(var t=this._pool.length,e=0;e<t;++e)this._pool[e].destroy&&this._pool[e].destroy();this._pool.length=0},t.prototype.put=function(t){if(t&&-1===this._pool.indexOf(t)){t.removeFromParent(!1);for(var e=0,o=t.getComponents(cc.Component);e<o.length;e++){var n=o[e];n&&n.unuse&&n.unuse.apply(n)}this._pool.push(t),this.completeHandler&&this.totalSize<=this._pool.length&&(this.completeHandler(),this.completeHandler=null)}},t.prototype.get=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=this._pool.length-1;o<0&&(console.warn(" last < 0 "),this.initPool(1,!0)),o=this._pool.length-1;var n=this._pool[o];this._pool.length=o;for(var i=0,a=n.getComponents(cc.Component);i<a.length;i++){var r=a[i];r&&r.reuse&&r.reuse.apply(r,arguments)}return n},t}(),a=function(){function t(){this.count=0,this.totalCount=0,this.objPool=new n.HashMap,this.startTime=0}return Object.defineProperty(t,"inst",{get:function(){return this.ins?this.ins:this.ins=new t},enumerable:!0,configurable:!0}),t.prototype.init=function(t){var e=this;this.doneCallback=t,this.startTime=Date.now(),cc.loader.loadResDir("prefabs/",cc.Prefab,function(t,o,n){if(t)console.error(" Game Factory init failed:",t);else{e.totalCount=o.length;for(var a=function(t){var n=o[t],a=n.name.split("."),r=a[0],s=a[1]?parseInt(a[1]):30;console.log(" init pool:",r,", count:",s),setTimeout(function(){var t=new i(n,s,e.addCount.bind(e));e.objPool.add(r,t)},10*t)},r=0;r<o.length;r++)a(r)}})},t.prototype.addCount=function(){this.count++,this.count>=this.totalCount&&(console.log(" factory cost time:",(Date.now()-this.startTime).toFixed(2)+"ms"),this.doneCallback&&(this.doneCallback(),this.doneCallback=null))},t.prototype.getObj=function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];return this.objPool.has(t)?this.objPool.get(t).get(e):(console.error(" objPool dosen't exists this obj:",t),null)},t.prototype.putObj=function(t,e){if(this.objPool.has(t))return this.objPool.get(t).put(e);console.error(" objPool dosen't exists this obj:",t)},t}();o.gFactory=a.inst,cc._RF.pop()},{"../Utils/HashMap":"HashMap"}],GameListMediator:[function(t,e,o){"use strict";cc._RF.push(e,"53dbbrIRD1BTITSQaxYwoou","GameListMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Command/StartUpSignal"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onRegister=function(){n.StartUpSignal.inst.addListener(this.onGameStart,this)},e.prototype.onGameStart=function(){this.View.reFreshItems(),this.View.Show()},e}(t("../../View/BaseMediator").default);o.GameListMediator=i,cc._RF.pop()},{"../../View/BaseMediator":"BaseMediator","../Command/StartUpSignal":"StartUpSignal"}],GameListView:[function(t,e,o){"use strict";cc._RF.push(e,"d3c84j/qUlKu59AYuU4IbDX","GameListView"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./GameListMediator"),i=t("../../View/BaseView"),a=t("../../Global/GameConfig"),r=t("../Command/LoadGameSignal"),s=cc._decorator,c=s.ccclass,l=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.Toggle.node.on("toggle",function(){console.log("toggle")},this),this.BindMedaitor(n.GameListMediator)},Object.defineProperty(e.prototype,"ScrollView",{get:function(){return this.getComponent(cc.ScrollView)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Content",{get:function(){return this.ScrollView.content},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Toggle",{get:function(){return this.node.getChildByName("Toggle").getComponent(cc.Toggle)},enumerable:!0,configurable:!0}),e.prototype.reFreshItems=function(){var t=a.GameConfig.inst.Config.games.length;if(!(this.Content.childrenCount>=t)){console.log(" reFreshItems ");var e=this,o=this.Content.children[0];for(i(o,this.Content.childrenCount-1);this.Content.childrenCount<t;){var n=cc.instantiate(o);this.Content.addChild(n),i(n,this.Content.childrenCount-1)}}function i(t,o){o%=a.GameConfig.inst.Config.games.length,(""==a.GameConfig.Url?cc.loader.loadRes.bind(cc.loader):cc.loader.load.bind(cc.loader))(a.GameConfig.Url+"Icons/"+a.GameConfig.inst.Config.games[o]+".jpg",function(n,i){n?console.error(n):(t.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i),t.name=a.GameConfig.inst.Config.games[o],t.targetOff(e),t.on(cc.Node.EventType.TOUCH_END,function(){r.LoadGameSignal.inst.dispatchTwo(t.name,e.Toggle.isChecked)},e))})}},e=__decorate([c],e)}(i.default));o.default=l,cc._RF.pop()},{"../../Global/GameConfig":"GameConfig","../../View/BaseView":"BaseView","../Command/LoadGameSignal":"LoadGameSignal","./GameListMediator":"GameListMediator"}],GamePageMediator:[function(t,e,o){"use strict";cc._RF.push(e,"7e8acJlozlMP4X8hBSdAuDZ","GamePageMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../View/BaseMediator"),i=t("../Command/LoadGameSignal"),a=t("../../Global/GameConfig"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"WebView",{get:function(){return this.node.getChildByName("GameView")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CloseButton",{get:function(){return this.node.getChildByName("Close")},enumerable:!0,configurable:!0}),e.prototype.onRegister=function(){this.WebView.on("error",this.onGameLoadFail,this),this.WebView.on("loaded",this.onGameLoadSuccess,this),this.WebView.on("loading",this.onGameLoadProgress,this),this.CloseButton.on(cc.Node.EventType.TOUCH_END,this.Close,this),i.LoadGameSignal.inst.addListenerTwo(this.startLoadGame,this)},e.prototype.Close=function(){this.WebView.active=!1,this.WebView.removeComponent(cc.WebView),this.View.Hide()},e.prototype.startLoadGame=function(t,e){console.log(" load game:",t,", special:",e);var o=e?a.GameConfig.inst.Config.specialPath:a.GameConfig.inst.Config.normalPath;this.WebView.active=!0;var n=this.WebView.addComponent(cc.WebView);n.url=a.GameConfig.inst.Config.Url+o+t+"?time="+Date.now(),console.log(n.url),this.View.Show()},e.prototype.onGameLoadSuccess=function(){console.log(" game load success ")},e.prototype.onGameLoadFail=function(){console.log(" game load fail ")},e.prototype.onGameLoadProgress=function(){console.log(" game load progress ")},e}(n.default);o.GamePageMediator=r,cc._RF.pop()},{"../../Global/GameConfig":"GameConfig","../../View/BaseMediator":"BaseMediator","../Command/LoadGameSignal":"LoadGameSignal"}],GamePageView:[function(t,e,o){"use strict";cc._RF.push(e,"a3eaaSESYJIDrxr49BFyoKN","GamePageView"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../View/BaseView"),i=t("./GamePageMediator"),a=cc._decorator,r=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"BlockEvent",{get:function(){return this.getComponent(cc.BlockInputEvents)},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.BindMedaitor(i.GamePageMediator),this.BlockEvent.enabled=!1},e.prototype.Show=function(){t.prototype.Show.call(this),this.BlockEvent.enabled=!0},e.prototype.Hide=function(){t.prototype.Hide.call(this),this.BlockEvent.enabled=!1},e=__decorate([r],e)}(n.default));o.default=s,cc._RF.pop()},{"../../View/BaseView":"BaseView","./GamePageMediator":"GamePageMediator"}],HashMap:[function(t,e,o){"use strict";cc._RF.push(e,"4b0e7DzcRNJnZXTYCWgDaDU","HashMap"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this._list=new Array,this.clear()}return t.prototype.getIndexByKey=function(t){for(var e=this._list.length,o=0;o<e;o++){if(this._list[o].key==t)return o}return-1},t.prototype.keyOf=function(t){for(var e=this._list.length,o=0;o<e;o++){var n=this._list[o];if(n.value.hashKey&&t.hashKey&&n.value.hashKey===t.hashKey||n.value==t)return n.key}return null},Object.defineProperty(t.prototype,"keys",{get:function(){for(var t=new Array,e=0,o=this._list;e<o.length;e++){var n=o[e];n&&t.push(n.key)}return t},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){var o={key:t,value:e},n=this.getIndexByKey(t);-1!=n?this._list[n]=o:this._list.push(o)},Object.defineProperty(t.prototype,"values",{get:function(){return this._list},enumerable:!0,configurable:!0}),t.prototype.remove=function(t){var e=this.getIndexByKey(t);if(-1!=e){var o=this._list[e];return this._list.splice(e,1),o}return null},t.prototype.has=function(t){return-1!=this.getIndexByKey(t)},t.prototype.get=function(t){var e=this.getIndexByKey(t);return-1!=e?this._list[e].value:null},Object.defineProperty(t.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),t.prototype.sort=function(t){this._list.sort(t)},t.prototype.forEachKeyValue=function(t){for(var e=this._list.length,o=0;o<e;o++){t(this._list[o])}},t.prototype.forEach=function(t){for(var e=this._list.length,o=0;o<e;o++){var n=this._list[o];t(n.key,n.value)}},t.prototype.clear=function(){this._list=[]},t}();o.HashMap=n,cc._RF.pop()},{}],InitialFacade:[function(t,e,o){"use strict";cc._RF.push(e,"cbbbcO7od5PrqaPNOs8dFh3","InitialFacade"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Command/InititalCommond"),i=t("../Command/StartGameCommond"),a=t("../Command/LoadAudioCommond"),r=t("../Command/LoadPrefabCommond"),s=t("../../Utils/Celer/CelerSDK"),c=t("../Command/LoadConfigCommond"),l=function(){function t(t){this.loadTime={},this.steps=[],this.facade=puremvc.Facade.getInstance(t)}return Object.defineProperty(t,"inst",{get:function(){return this.instance?this.instance:this.instance=new t(t.MULTITON_KEY)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Facade",{get:function(){return console.assert(null==this.facade," facade is null"),this.facade},enumerable:!0,configurable:!0}),t.prototype.register=function(){var e=this;this.facade.registerCommand(t.INITIALIZATION,n.InitialCommond),this.facade.registerCommand(t.START_UP,i.StartGameCommond),s.CelerSDK.inst.init(function(){e.facade.sendNotification(t.START_UP,e)})},t.prototype.unregister=function(){this.facade.removeCommand(t.INITIALIZATION),this.facade.removeCommand(t.START_UP)},t.prototype.start=function(){this.register();for(var e=0,o=t.TOTAL_STEPS;e<o.length;e++){var n=o[e];this.loadTime[n]=Date.now()}this.facade.sendNotification(t.INITIALIZATION,this)},Object.defineProperty(t.prototype,"LoadPercent",{get:function(){return this.steps.length/t.TOTAL_STEPS.length},enumerable:!0,configurable:!0}),t.prototype.step=function(e){if(console.log(" initialization step:",e),this.steps.indexOf(e)<0){this.steps.push(e),this.steps.sort(),t.TOTAL_STEPS.sort();var o=this.steps.join("-"),n=t.TOTAL_STEPS.join("-");console.log(" cur-steps\uff1a",o,", total:",n,", ",e," cost:",(Date.now()-this.loadTime[e]).toFixed(2),"ms"),n===o&&(s.CelerSDK.inst.isOnCelerPlatform()?s.CelerSDK.inst.celerXReady():this.facade.sendNotification(t.START_UP,this))}},t.MULTITON_KEY="INITIAL_FCADE",t.INITIALIZATION="initialization",t.START_UP="startup",t.TOTAL_STEPS=[a.LoadAudioCommond.STEP,r.LoadPrefabCommond.STEP,c.LoadConfigCommond.STEP],t}();o.InitialFacade=l,cc._RF.pop()},{"../../Utils/Celer/CelerSDK":"CelerSDK","../Command/InititalCommond":"InititalCommond","../Command/LoadAudioCommond":"LoadAudioCommond","../Command/LoadConfigCommond":"LoadConfigCommond","../Command/LoadPrefabCommond":"LoadPrefabCommond","../Command/StartGameCommond":"StartGameCommond"}],InititalCommond:[function(t,e,o){"use strict";cc._RF.push(e,"a28caT/H41F74cWxJYqN9pz","InititalCommond"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./LoadPrefabCommond"),i=t("./LoadAudioCommond"),a=t("./LoadConfigCommond"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.initializeMacroCommand=function(){this.addSubCommand(n.LoadPrefabCommond),this.addSubCommand(i.LoadAudioCommond),this.addSubCommand(a.LoadConfigCommond)},e}(puremvc.MacroCommand);o.InitialCommond=r,cc._RF.pop()},{"./LoadAudioCommond":"LoadAudioCommond","./LoadConfigCommond":"LoadConfigCommond","./LoadPrefabCommond":"LoadPrefabCommond"}],LoadAudioCommond:[function(t,e,o){"use strict";cc._RF.push(e,"d4f3eGYUlBES5d8aEvuPQna","LoadAudioCommond"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){if(t){var o=t.getBody();o&&o.step?o.step(e.STEP):console.error(" load Audio: body is null")}else console.error(" LoadAudioCommond: notification is null")},e.STEP="LoadAudio",e}(puremvc.SimpleCommand);o.LoadAudioCommond=n,cc._RF.pop()},{}],LoadConfigCommond:[function(t,e,o){"use strict";cc._RF.push(e,"6b0eeyqdrZLF5W59XFgDMPO","LoadConfigCommond"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../Global/GameConfig"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){if(t){var o=t.getBody();o&&o.step?n.GameConfig.inst.loadConfig(function(){o.step(e.STEP)}):console.error(" load Config: body is null")}else console.error(" LoadConfigCommond: notification is null")},e.STEP="LoadConfig",e}(puremvc.SimpleCommand);o.LoadConfigCommond=i,cc._RF.pop()},{"../../Global/GameConfig":"GameConfig"}],LoadGameSignal:[function(t,e,o){"use strict";cc._RF.push(e,"2e9d8ajhhdKJ4lLQ2rxKUIp","LoadGameSignal"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t("../../Utils/Signal").BaseSignal);o.LoadGameSignal=n,cc._RF.pop()},{"../../Utils/Signal":"Signal"}],LoadPrefabCommond:[function(t,e,o){"use strict";cc._RF.push(e,"8b33fPnvCZEJ7bc/zCVv9My","LoadPrefabCommond"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../Factory/GameFactory"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){n.gFactory.init(function(){if(t){var o=t.getBody();o&&o.step&&o.step(e.STEP)}})},e.STEP="LoadPrefab",e}(puremvc.SimpleCommand);o.LoadPrefabCommond=i,cc._RF.pop()},{"../../Factory/GameFactory":"GameFactory"}],LoadingMediator:[function(t,e,o){"use strict";cc._RF.push(e,"c1bc0VPwENA360VfVAc2oOS","LoadingMediator"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../View/BaseMediator"),i=t("../../GamePlay/Command/StartUpSignal"),a=cc._decorator,r=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onRegister=function(){i.StartUpSignal.inst.addListener(this.onGameStart,this)},e.prototype.onGameStart=function(){this.View.Hide()},e=__decorate([r],e)}(n.default));o.default=s,cc._RF.pop()},{"../../GamePlay/Command/StartUpSignal":"StartUpSignal","../../View/BaseMediator":"BaseMediator"}],LoadingView:[function(t,e,o){"use strict";cc._RF.push(e,"29f9dxDYNRCYIEmZoZYTWke","LoadingView"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../View/BaseView"),i=t("./LoadingMediator"),a=t("../Facade/InitialFacade"),r=cc._decorator,s=r.ccclass,c=(r.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"Title",{get:function(){return this.node.getChildByName("Title").getComponent(cc.Label)},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){this.node.scale=1,this.BindMedaitor(i.default)},e.prototype.update=function(){this.Title.string="Loading "+(100*a.InitialFacade.inst.LoadPercent).toFixed(1)+"%"},e=__decorate([s],e)}(n.default));o.default=c,cc._RF.pop()},{"../../View/BaseView":"BaseView","../Facade/InitialFacade":"InitialFacade","./LoadingMediator":"LoadingMediator"}],LogHandler:[function(t,e,o){"use strict";cc._RF.push(e,"a4747QIvUBIo6Ktpx/xQwuB","LogHandler"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(t){function e(){var o=t.call(this)||this;if(o.logFunc=console.log,o.logMsg=null,o.frameTimes=0,o.now=0,o.Frame=20,o.totalFrames=0,o.startTime=0,window.addEventListener)for(var n=0,i=e.LISTENNING_EVENTS;n<i.length;n++){var a=i[n],r="trigger"+a.charAt(0).toLocaleUpperCase()+a.substring(1);o[r]&&"function"==typeof o[r]&&window.addEventListener(a,o[r].bind(o))}return o}return __extends(e,t),e.prototype.dumpFrameInfo=function(){var t=(Date.now()-this.startTime)/1e3,e=t/this.totalFrames;this.log(" total frames:",this.totalFrames," ,total cost time:",t+"s"," , per frame cost time ave:"+e+"s")},e.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addLog.apply(this,t),this.sendLog()},e.prototype.initLog=function(t){var o=this;cc.director.once(cc.Director.EVENT_AFTER_SCENE_LAUNCH,function(){o.frameTimes=0,o.now=Date.now(),o.startTime=Date.now()},this),cc.director.on(cc.Director.EVENT_AFTER_DRAW,function(){o.frameTimes++,o.totalFrames++,o.frameTimes>=o.Frame&&(o.frameTimes=0,o.now=Date.now())},this),this.logFunc=t,console.error=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];e.inst.log("[ERROR]",t)},console.warn=function(){for(var t,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(t=e.inst).log.apply(t,["[WARN]"].concat(o))},console.log=function(){for(var t,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];(t=e.inst).log.apply(t,["[INFO]"].concat(o))}},e.prototype.formatLogArguments=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var o="",n=0;n<arguments.length;n++){var i=typeof arguments[n];"string"==i||"number"==i?o+=" "+arguments[n]:"object"==i?o+=" "+JSON.stringify(arguments[n]):"boolean"==i&&arguments[n].toString&&(o+=arguments[n].toString())}return o},e.prototype.addLog=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];null==this.logMsg&&(this.logMsg={});var n=this.formatLogArguments.apply(this,t),i=this.getFullTime(new Date);this.logMsg[i]=e.VERSION+n},e.prototype.getFullTime=function(t){var e="";e+=t.getFullYear();var o=t.getMonth();e+="-"+(o>=10?o:"0"+o);var n=t.getDate();e+="-"+(n>=10?n:"0"+n);var i=t.getHours();e+="  "+(i>=10?i:"0"+i);var a=t.getMinutes();e+=":"+(a>=10?a:"0"+a);var r=t.getSeconds();return e+=":"+(r>=10?r:"0"+r)},e.prototype.sendLog=function(){this.logFunc&&null!=this.logMsg&&(this.logFunc(JSON.stringify(this.logMsg)),this.logMsg=null)},e.prototype.triggerClose=function(t){this.addLog("triggerClose"),this.sendLog()},e.prototype.triggerLoad=function(t){this.addLog("triggerLoad"),this.sendLog()},e.prototype.triggerUnload=function(t){this.addLog("triggerUnload"),this.sendLog()},e.prototype.triggerOnunload=function(t){this.addLog("triggerUnload"),this.sendLog()},e.prototype.triggerError=function(t){this.addLog("triggerError"),this.addLog(t.message),this.sendLog()},e.prototype.triggerFocus=function(t){this.addLog("triggerFocus"),this.sendLog()},e.prototype.triggerBlur=function(t){this.addLog("triggerBlur"),this.sendLog()},e.prototype.triggerAbort=function(t){this.addLog("triggerAbort"),this.sendLog()},e.prototype.triggerSuspend=function(t){this.addLog("triggerSuspend"),this.sendLog()},e.prototype.beforeunload=function(t){this.addLog("beforeunload"),this.sendLog()},e.VERSION="Game template : ",e.LISTENNING_EVENTS=["error"],e}(t("./ToSingleton").SingleTon());o.LogHandler=n,cc._RF.pop()},{"./ToSingleton":"ToSingleton"}],MainScene:[function(t,e,o){"use strict";cc._RF.push(e,"bb115JQb0ZMfLouNAXV3ENp","MainScene"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Initialization/Facade/InitialFacade"),i=cc._decorator,a=i.ccclass,r=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){n.InitialFacade.inst.start()},e.prototype.start=function(){},e=__decorate([a],e)}(cc.Component));o.default=r,cc._RF.pop()},{"../Initialization/Facade/InitialFacade":"InitialFacade"}],Random:[function(t,e,o){"use strict";cc._RF.push(e,"114f9Vox8JGQbohBr4HFlkf","Random"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.seededRandom=function(t,e,o){return e+1e6*((1711*t+88888)%302654/302654+(1722*t+55555)%302665/302665+(1755*t+23333)%302766/302766)%1e6/1e6*(o-e)},t.getRandom=function(t,e){void 0===t&&(t=0),void 0===e&&(e=1);var o=this.randomSeed,n=this.seededRandom(o,t,e),i=Math.floor(this.seededRandom(o,1,302766));return this.randomSeed+=i,n},t.setRandomSeed=function(t){this.randomSeed=t,this.sharedSeed=t},t.randomRoundToInt=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),Math.round(this.getRandom(t,e))},t.randomSeed=0,t.sharedSeed=0,t}();o.Random=n,cc._RF.pop()},{}],Signal:[function(t,e,o){"use strict";cc._RF.push(e,"5e03fyVNOZPs7lLvT6ttunM","Signal"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listenerMap=[],e.onceListenerMap=[],e}return __extends(e,t),e.prototype.doDispatch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.excuteListener.apply(this,t),this.excuteOnce.apply(this,t)},e.prototype.excuteListener=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.listenerMap&&this.listenerMap.length>0)for(var o=0,n=this.listenerMap;o<n.length;o++){var i=n[o];i.callback.apply(i.target,t)}},e.prototype.excuteOnce=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(this.onceListenerMap&&this.onceListenerMap.length>0){for(var o=0,n=this.onceListenerMap;o<n.length;o++){var i=n[o];i.callback.apply(i.target,t)}this.onceListenerMap.length=0}},e.prototype.listen=function(t,e){this.listenerMap.push({callback:t,target:e})},e.prototype.listenOnce=function(t,e){this.onceListenerMap.push({callback:t,target:e})},e.prototype.removeListener=function(t,e){if(this.listenerMap&&this.listenerMap.length>0)for(var o=0;o<this.listenerMap.length;++o){var n=this.listenerMap[o];n.callback==t&&n.target==e&&(this.listenerMap.splice(o,1),--o)}},e.prototype.removeTarget=function(t){if(this.listenerMap&&this.listenerMap.length>0)for(var e=0;e<this.listenerMap.length;++e){this.listenerMap[e].target==t&&(this.listenerMap.splice(e,1),--e)}},e.prototype.dispatch=function(){this.doDispatch(null)},e.prototype.dispatchOne=function(t){this.doDispatch(t)},e.prototype.dispatchTwo=function(t,e){this.doDispatch(t,e)},e.prototype.dispatchThree=function(t,e,o){this.doDispatch(t,e,o)},e.prototype.dispatchFour=function(t,e,o,n){this.doDispatch(t,e,o,n)},e.prototype.dispatchFive=function(t,e,o,n,i){this.doDispatch(t,e,o,n,i)},e.prototype.addListener=function(t,e){this.listen(t,e)},e.prototype.addOnce=function(t,e){this.listenOnce(t,e)},e.prototype.addListenerOne=function(t,e){this.listen(t,e)},e.prototype.addListenerTwo=function(t,e){this.listen(t,e)},e.prototype.addListenerThree=function(t,e){this.listen(t,e)},e.prototype.addListenerFour=function(t,e){this.listen(t,e)},e.prototype.addListenerFive=function(t,e){this.listen(t,e)},e.prototype.addOnceOne=function(t,e){this.listenOnce(t,e)},e.prototype.addOnceTwo=function(t,e){this.listenOnce(t,e)},e.prototype.addOnceThree=function(t,e){this.listenOnce(t,e)},e.prototype.addOnceFour=function(t,e){this.listenOnce(t,e)},e.prototype.addOnceFive=function(t,e){this.listenOnce(t,e)},e}(t("./ToSingleton").SingleTon());o.BaseSignal=n,cc._RF.pop()},{"./ToSingleton":"ToSingleton"}],StartGameCommond:[function(t,e,o){"use strict";cc._RF.push(e,"1db594KvoJIVbc+cwfogrGn","StartGameCommond"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../../GamePlay/Command/StartUpSignal"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.execute=function(t){console.log("--------- excute StartGameCommond ---------"),n.StartUpSignal.inst.dispatch()},e}(puremvc.SimpleCommand);o.StartGameCommond=i,cc._RF.pop()},{"../../GamePlay/Command/StartUpSignal":"StartUpSignal"}],StartUpSignal:[function(t,e,o){"use strict";cc._RF.push(e,"bee7cVgpK5NVqEf3r3y6HBN","StartUpSignal"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t("../../Utils/Signal").BaseSignal);o.StartUpSignal=n,cc._RF.pop()},{"../../Utils/Signal":"Signal"}],StepManager:[function(t,e,o){"use strict";cc._RF.push(e,"83709TvPtJOVayPDGaPh6Ov","StepManager");(function(){function t(){this.totalStep=[],this.curStep=[]}t.prototype.register=function(t,e){this.completeCallback=t,this.totalStep=e},t.prototype.nextStep=function(t){this.totalStep.indexOf(t)<0?console.error(" \u6ca1\u6709\u8fd9\u4e00\u6b65\uff1a",t):this.curStep.indexOf(t)>=0?console.warn(" \u6b65\u9aa4\u5df2\u5b8c\u6210\uff1a",t):(this.curStep.push(t),this.curStep.sort(function(t,e){return t>e?-1:1}),this.totalStep.sort(function(t,e){return t>e?-1:1}),console.log(" cur step:",this.curStep.join(",")),console.log(" total step:",this.totalStep.join(",")),this.curStep.join(",")==this.totalStep.join(",")&&(console.log(" step done"),this.totalStep.length=0,this.completeCallback(),this.completeCallback=null))}})();cc._RF.pop()},{}],Time:[function(t,e,o){"use strict";cc._RF.push(e,"87a24xcV95AoII6L5W1ABoI","Time"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.timeFormat=function(t){var e=Math.floor(t/60),o=Math.floor(t%60),n="00";return o<10&&(n="0"+o),e+"/"+n},t}();o.Time=n,cc._RF.pop()},{}],ToSingleton:[function(t,e,o){"use strict";cc._RF.push(e,"b07299nlSpOIIxOkIMBhUY9","ToSingleton"),Object.defineProperty(o,"__esModule",{value:!0}),o.SingleTon=function(){return function(){function t(){}return Object.defineProperty(t,"inst",{get:function(){return this.ins?this.ins:this.ins=new this},enumerable:!0,configurable:!0}),t}()},cc._RF.pop()},{}]},{},["GameFactory","LoadGameSignal","StartUpSignal","GameListMediator","GameListView","GamePageMediator","GamePageView","FacadeGlobal","GameConfig","InititalCommond","LoadAudioCommond","LoadConfigCommond","LoadPrefabCommond","StartGameCommond","InitialFacade","LoadingMediator","LoadingView","MainScene","AudioManager","StepManager","CelerSDK","HashMap","LogHandler","Random","Signal","Time","ToSingleton","BaseMediator","BaseView"]);